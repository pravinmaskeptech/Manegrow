
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-lg-2 col-md-2 col-12">
                <h5 class="text-dark mr-2"><b></b></h5>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.container-fluid -->
</div>


<style>

    #ddlCustomer_suggestion {
        width: 700px !important;
    }

    #ddlBranch_suggestion {
        width: 700px !important;
    }

    .panel-group {
        margin: 30px 0px;
        width: 91%;
        min-height: 700px;
    }

        .panel-group .panel {
            border-radius: 0;
            box-shadow: none;
            border-color: #EEEEEE;
        }

    .panel-default > .panel-heading {
        padding: 0;
        border-radius: 0;
        color: #212121;
        background-color: #FAFAFA;
        border-color: #EEEEEE;
    }

    .panel-title {
        font-size: 14px;
    }

        .panel-title > a {
            display: block;
            padding: 15px;
            text-decoration: none;
        }

    .more-less {
        float: right;
        color: #212121;
    }

    .panel-default > .panel-heading + .panel-collapse > .panel-body {
        border-top-color: #EEEEEE;
    }

    .box_top_3 {
        background: #EBF0FF;
    }

    .box_top_1 {
        background: #EDF6EA;
    }

    .box_top_font {
        font-size: 16px;
    }

    .feature-wrap1 i {
        font-size: 50px;
        height: 110px;
        width: 110px;
        margin: 3px;
        border-radius: 100%;
        line-height: 110px;
        text-align: center;
        background: #ffffff;
        color: #4ea32a;
        border: 3px solid #ffffff;
        box-shadow: inset 0 0 0 5px #f2f2f2;
        -webkit-box-shadow: inset 0 0 0 5px #f2f2f2;
        -webkit-transition: 500ms;
        -moz-transition: 500ms;
        -o-transition: 500ms;
        transition: 500ms;
        /* float: left; */
        margin-right: 25px;
    }

        .feature-wrap1 i:hover {
            /* background: #4ea32a; */
            color: #4ea32a;
            box-shadow: inset 0 0 0 5px #c52d2f;
            -webkit-box-shadow: inset 0 0 0 5px #4ea32a;
            border: 3px solid #4ea32a;
        }

    a {
        color: #428bca;
        text-decoration: none;
    }

    .box_top_font {
        font-size: 16px;
        margin-left: 20px;
    }

    .box_top_2_span {
        color: #FF9933;
    }

    .box_top {
        text-align: center;
        padding: 10px;
        display: block;
        min-height: 90px;
        box-shadow: 0 1px 1px rgba(0,0,0,0.1);
        border-radius: 2px;
        margin-bottom: 15px;
    }

    .box_top_1 {
        background: #EDF6EA;
    }

    .box_top_2 {
        background: #FFF5EB;
    }

    .box_top_3 {
        background: #EBF0FF;
    }

    .box_top_3_span {
        color: #3366FF;
    }

    .box_top_4 {
        background: #FFE6E6;
    }

    .box_top_2 {
        background: #FFF5EB;
    }

    .feature-wrap2 i:hover {
        /* background: #FF9933; */
        color: #FF9933;
        box-shadow: inset 0 0 0 5px #c52d2f;
        -webkit-box-shadow: inset 0 0 0 5px #FF9933;
        border: 3px solid #FF9933;
    }

    .feature-wrap2 i {
        font-size: 50px;
        height: 110px;
        width: 110px;
        margin: 3px;
        border-radius: 100%;
        line-height: 110px;
        text-align: center;
        background: #ffffff;
        color: #FF9933;
        border: 3px solid #ffffff;
        box-shadow: inset 0 0 0 5px #f2f2f2;
        -webkit-box-shadow: inset 0 0 0 5px #f2f2f2;
        -webkit-transition: 500ms;
        -moz-transition: 500ms;
        -o-transition: 500ms;
        transition: 500ms;
        /* float: left; */
        margin-right: 25px;
    }


    .charts {
        text-align: center;
        padding: 10px;
        display: block;
        min-height: 90px;
        box-shadow: 0 1px 1px rgba(0,0,0,0.1);
        border-radius: 2px;
        margin-bottom: 15px;
        background: #fff;
        margin-top: 45px;
    }

    .page-header {
        padding-bottom: 9px;
        margin: 10px 0 0px;
        border-bottom: 1px solid #C7D1DD;
    }

    .top {
        margin-top: 30px;
    }

    .circle-tile {
        margin-bottom: 15px;
        text-align: center;
    }

    .circle-tile-heading {
        /* border: 3px solid rgba(255, 255, 255, 0.3); */
        border-radius: 104%;
        /* color: #FFFFFF; */
        height: 46px;
        margin: 0 auto -40px;
        position: relative;
        transition: all 0.3s ease-in-out 0s;
        width: 80px;
    }

        .circle-tile-heading .fa {
            line-height: 80px;
        }

    .circle-tile-content {
        padding-top: 50px;
    }

    .circle-tile-number {
        font-size: 26px;
        font-weight: 700;
        line-height: 1;
        padding: 5px 0 15px;
    }

    .circle-tile-description {
        text-transform: uppercase;
        font-size: 20px;
        color: #f4f4f4;
    }

    .circle-tile-footer {
        background-color: #115882;
        color: #f4f4f4;
        display: block;
        padding: 5px;
        transition: all 0.3s ease-in-out 0s;
    }

        .circle-tile-footer:hover {
            background-color: rgba(0, 0, 0, 0.2);
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
        }

    .circle-tile-heading.dark-blue:hover {
        background-color: #2E4154;
    }

    .circle-tile-heading.green:hover {
        background-color: #138F77;
    }

    .circle-tile-heading.orange:hover {
        background-color: #DA8C10;
    }

    .circle-tile-heading.blue:hover {
        background-color: #2473A6;
    }

    .circle-tile-heading.red:hover {
        background-color: #CF4435;
    }

    .circle-tile-heading.purple:hover {
        background-color: #7F3D9B;
    }

    .tile-img {
        text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.9);
    }

    .dark-blue {
        /* background-color: #3c8dbc; */
    }

    .green {
        background-color: #16A085;
    }

    .blue {
        background-color: #2980B9;
    }

    .orange {
        background-color: #F39C12;
    }

    .red {
        background-color: #61a5cc;
        border-radius: 13px;
    }

    .purple {
        background-color: #8E44AD;
    }

    .dark-gray {
        background-color: #95A5A6;
    }

    .gray {
        background-color: #95A5A6;
    }

    .light-gray {
        background-color: #BDC3C7;
    }

    .yellow {
        background-color: #F1C40F;
    }

    .text-dark-blue {
        color: #34495E;
    }

    .text-green {
        color: #16A085;
    }

    .text-blue {
        color: #2980B9;
    }

    .text-orange {
        color: #F39C12;
    }

    .text-red {
        color: #E74C3C;
    }

    .text-purple {
        color: #8E44AD;
    }

    .text-faded {
        color: #f4f4f4;
        font-size: 15px;
    }



    /* ----- v CAN BE DELETED v ----- */



    .orange-circle-button {
        border: .5em solid #EDF6EA;
        font-size: 1em;
        line-height: 1.1em;
        color: #4ea32a;
        margin: auto;
        border-radius: 50%;
        height: 8em;
        width: 7em;
        position: relative;
        background-color: #EDF6EA;
        text-decoration: none;
        border-color: #4ea32a;
    }

    .orange-circle-button1 {
        border: .5em solid #FF9933;
        font-size: 1em;
        line-height: 1.1em;
        color: #FF9933;
        margin: auto;
        border-radius: 50%;
        height: 8em;
        width: 7em;
        position: relative;
        background-color: #FFF5EB;
        text-decoration: none;
        border-color: #FF9933;
    }

    .orange-circle-button2 {
        border: .5em solid #3366FF;
        font-size: 1em;
        line-height: 1.1em;
        color: #3366FF;
        margin: auto;
        border-radius: 50%;
        height: 8em;
        width: 7em;
        position: relative;
        background-color: #EBF0FF;
        text-decoration: none;
        border-color: #3366FF;
    }

    .orange-circle-button3 {
        border: .5em solid #EDF6EA;
        font-size: 1em;
        line-height: 1.1em;
        color: #EDF6EA;
        margin: auto;
        border-radius: 50%;
        height: 8em;
        width: 7em;
        position: relative;
        background-color: #EDF6EA;
        text-decoration: none;
        border-color: #EDF6EA;
    }

    .orange-circle-button4 {
        border: .5em solid #FF0000;
        font-size: 1em;
        line-height: 1.1em;
        color: #FF0000;
        margin: auto;
        border-radius: 50%;
        height: 8em;
        width: 7em;
        position: relative;
        background-color: #FFE6E6;
        text-decoration: none;
        border-color: #FF0000;
    }

    .orange-circle-button5 {
        border: .5em solid #EDF6EA;
        font-size: 1em;
        line-height: 1.1em;
        color: #EDF6EA;
        margin: auto;
        border-radius: 50%;
        height: 8em;
        width: 7em;
        position: relative;
        background-color: #EDF6EA;
        text-decoration: none;
        border-color: #4ea32a;
    }

    <!-- .orange-circle-button:visited {
        color: #ffffff;
        background-color: #e84d0e;
        text-decoration: none;
    }
    -->
    .orange-circle-link-greater-than {
        font-size: 1em;
    }


    .panel-body .btn:not(.btn-block) {
        width: 120px;
        margin-bottom: 10px;
    }

    /***************/

    .wrimagecard {
        margin-top: 0;
        margin-bottom: 1.5rem;
        text-align: left;
        position: relative;
        background: #fff;
        box-shadow: 12px 15px 20px 0px rgba(46,61,73,0.15);
        border-radius: 4px;
        transition: all 0.3s ease;
    }

        .wrimagecard .fa {
            position: relative;
            font-size: 70px;
        }

    .wrimagecard-topimage_header {
        padding: 20px;
    }

    a.wrimagecard:hover, .wrimagecard-topimage:hover {
        box-shadow: 2px 4px 8px 0px rgba(46,61,73,0.2);
    }

    .wrimagecard-topimage a {
        width: 100%;
        height: 100%;
        display: block;
    }

    .wrimagecard-topimage_title {
        padding: 20px 24px;
        height: 80px;
        padding-bottom: 0.75rem;
        position: relative;
    }

    .wrimagecard-topimage a {
        border-bottom: none;
        text-decoration: none;
        color: #525c65;
        transition: color 0.3s ease;
    }

    /****************/
    .small-box {
        z-index: 0 !important;
    }

        .small-box h3 {
            font-size: 32px;
            font-weight: bold;
            margin: 0 0 10px 0;
            white-space: nowrap;
            padding: 0;
        }


    .myButton {
        border-radius: 5px;
        border: 1px solid #ffffff;
        display: inline-block;
        cursor: pointer;
        font-family: Arial;
        font-size: 16px;
        padding: 5px 20px;
        text-decoration: none;
        border-color: #3c8dbc !important;
        background-color: #3c8dbc !important;
        color: #FFFFFF;
    }

        .myButton:hover {
            background-color: #eb675e;
            color: #000;
        }

        .myButton:active {
            position: relative;
            top: 1px;
        }

    .inner {
        padding: 10px;
        height: 100px;
    }

    table.dataTable th,
    table.dataTable td {
        white-space: nowrap;
    }
</style>

<body class="hold-transition skin-blue sidebar-mini">

    <section class="content">
        <section id="demo1">
            <div class="content-header" style="padding:1px">
                <div class="row">
                    <div class="col-md-10">
                        <center style="color: #2f2f69">  <h4>Packing List</h4></center>
                    </div>

                </div>
            </div>
           
            <div class="container-fluid">

                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row">

                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("From Date")
                                        <input type="text" class="form-control" id="FromDate">
                                    </div>
                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("To Date")
                                        <input type="text" class="form-control" id="ToDate">
                                    </div>

                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("Product Type")
                                        @Html.DropDownList("ProductType", new SelectList(ViewBag.ProductType, "ID", "Type"), "Select Product Type", new { @class = "form-control", Autocomplete = "off", data_bv_notempty = "true", data_bv_notempty_message = "Product Name is required and cannot be empty", onchange = "GetProducts()" })
                                    </div>

                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("Product")
                                        @Html.DropDownList("Product", new SelectList(ViewBag.Product, "Name", "Name"), "Select Product", new { @class = "form-control", Autocomplete = "off", data_bv_notempty = "true", data_bv_notempty_message = "Product Name is required and cannot be empty" })
                                    </div>

                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("Customer Type")
                                        @Html.DropDownList("Type", new SelectList(ViewBag.CustType, "Type", "Type"), "Select Type", new { @class = "form-control", Autocomplete = "off", data_bv_notempty = "true", data_bv_notempty_message = "Customer Type is required and cannot be empty" })
                                    </div>
                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("City")
                                        @Html.DropDownList("City", new SelectList(ViewBag.City, "City", "City"), "Select City", new { @class = "form-control", Autocomplete = "off", data_bv_notempty = "true", data_bv_notempty_message = "City is required and cannot be empty" })
                                    </div>
                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("Short Name")
                                        @Html.DropDownList("Short Name", new SelectList(ViewBag.Shortname, "ShortName", "ShortName"), "Select ShortName", new { @class = "form-control", Autocomplete = "off", data_bv_notempty = "true", data_bv_notempty_message = "Short Name is required and cannot be empty" })
                                    </div>
                                    <div class="col-md-2 col-12 mb-2">
                                        @Html.Label("Sales Person")
                                        @Html.DropDownList("SalesPerson", new SelectList(ViewBag.SalesPerson, "Name", "Name"), "Select Name", new { @class = "form-control", Autocomplete = "off", data_bv_notempty = "true", data_bv_notempty_message = "Short Name is required and cannot be empty" })
                                    </div>

                                    <div class="col-md-2 col-12 mb-2">

                                    </div>
                                    <div class="col-md-2 col-12 mb-2">

                                    </div>

                                    

                                    <div class="col-md-2 col-12 mb-2">

                                    </div>

                                    <button type="button" class="btn btn-success" onclick="godata()"> GO </button>
                                </div>
                               

                                <div class="table-responsive">
                                    <table id="example" class="table table-striped table-bordered dt-responsive" style="width:100%;">
                                        <thead>
                                            <tr class="text-uppercase">
                                                <th><input type="button" id="btnAddd" class="btn btn-primary" value="+" onclick="ShowBulkPopup()" /></th>
                                                <th></th>
                                              
                                                <th>Order No</th>
                                                <th>Order Status</th>
                                                <th>Customer Name</th>
                                                <th>Short Name</th>
                                                <th>Customer Type</th>

                                                <th id="hfQty" style="color: red ">Qty</th>
                                                <th>Product</th>
                                                @*<th>UOM</th>*@
                                                <th id="hfWeight" style="color: red ">Weight(kg)</th>
                                                <th>City</th>

                                                <th>Location</th>
                                                <th>Delivery Date</th>
                                                <th>DeliveryTime</th>
                                                <th>Remark</th>
                                                <th>Packaging Remark</th>
                                                <th>Creator</th>
                                                <th>Mobile No</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="myModal">
                <input type="hidden" id="hdpreviousqty" />
                <input type="hidden" id="hdproductid" />

                <div class="modal-dialog modal-xl modal-dialog-centered">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Packaging Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body">
                            <form>
                                <div class="row">
                                    <div class="col-md-3 col-12 mb-3">
                                        <label>Order No</label>
                                        <input type="text" id="OrderNo" class="form-control" placeholder="Order No" disabled="disabled">
                                    </div>
                                    <div class="col-md-3 col-12 mb-3">
                                        <label>Customer</label>
                                        <input type="text" id="Customer" class="form-control" placeholder="Customer" disabled="disabled">
                                    </div>
                                    <div class="col-md-3 col-12 mb-3">
                                        <label>Order Date</label>
                                        <input type="text" class="form-control" id="OrderDate" placeholder="OrderDate" disabled="disabled">
                                    </div>
                                    <div class="col-md-3 col-12 mb-3">
                                        <label>Customer Code</label>
                                        <input type="text" id="CustomerCode" class="form-control" placeholder="Customer Code" disabled="disabled">
                                    </div>
                                </div>



                                <div class=" row">

                                    <div class="col-md-3 col-12 mb-3">
                                        <label>Product</label>
                                        <input type="text" id="Products" class="form-control" placeholder="Product" disabled="disabled">
                                    </div>
                                    <div class="col-md-3 col-12 mb-3">
                                        <label>Qty(nos)</label>
                                        <input type="text" id="Qty" class="form-control" onchange="CalculateWeight(); showremark();" placeholder="Qty" disabled="disabled">
                                    </div>
                                    <div class="col-md-3 col-12 mb-3">
                                        <label></label>

                                        <label>Order Weight(kg)</label>
                                        <input type="text" id="Weight" class="form-control" placeholder="Weight" disabled="disabled">
                                    </div>
                                    <div class="col-md-3 col-12 mb-3">
                                        <br />
                                        <input type="button" id="Update1" class="btn btn-primary" value="Edit" onclick="qtyedit();">
                                    </div>
                                </div>

                                <panel id="pnlremark">
                                    <div class="row">
                                        <div class="col-md-9 col-12 mb-3">
                                            <labl>Remark</labl>
                                            <input type="text" id="PackagingRemark" class="form-control" placeholder="Remark">
                                        </div>
                                        <div class="col-md-3 col-12 mb-3">
                                            <labl><br /></labl>
                                            <input type="button" id="Update" class="btn btn-primary" value="Update" onclick="qtyedit();">
                                        </div>
                                    </div>
                                </panel>

                                <div class="row" id="focushere">

                                    <div class="col-md-12">
                                        <br />
                                        <div class="table-responsive">
                                            <table id="example" class="table table-striped table-bordered dt-responsive" style="width:100%;">
                                                <thead style="background-color: #d8e9c1">
                                                    <tr class="text-uppercase">
                                                        <th>Box Weight</th>
                                                        <th>No of Boxes</th>
                                                        <th>Total Weight</th>
                                                        <th>Action</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <input type="text" id="BoxWeight" class="form-control" placeholder="Box Weight" onchange="totalweightcalculator()">

                                                        </td>
                                                        <td>
                                                            <input type="text" id="NoOfBox" class="form-control" placeholder="No of Boxes" onchange="totalweightcalculator()">
                                                        </td>
                                                        <td>
                                                            <input type="text" id="TotalWeight" class="form-control" placeholder="Total Weight" disabled>
                                                        </td>
                                                        <td>
                                                            <button type="button" class="btn btn-primary" id="btnad" onclick="btnadd()">Add</button>
                                                        </td>
                                                    </tr>
                                                </tbody>

                                            </table>


                                            <div class="col-md-12">
                                                <br />
                                                <div class="table-responsive">
                                                    <table id="real" class="table table-striped table-bordered dt-responsive" style="width:100%;">
                                                        <thead style="background-color: #d8e9c1">
                                                            <tr class="text-uppercase">
                                                                <th hidden>P ID</th>
                                                                <th>Box Weight</th>
                                                                <th>No of Boxes</th>
                                                                <th>Total Weight</th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                        </tbody>

                                                    </table>
                                                </div>
                                                @*<button type="button" class="btn btn-success" onclick="Save()"> Save </button>
                                            <a href="@Url.Action("Index", "DashbordControl")" class="btn btn-primary"> Back to List </a>*@
                                            </div>
                                            <div class="row m-0">
                                                <div class="col-md-6">

                                                </div>
                                                <div class="col-md-3">
                                                    <label id="lbltot" class="ml-4"></label>

                                                </div>
                                                <div class="col-md-3" id="hfSave">
                                                    <button type="button" class="btn btn-success mx-3" onclick="Save()"> Save </button>
                                                    <a href="@Url.Action("Index", "DashbordControl")" class="btn btn-primary"> Back to List </a>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>





        </section>
    </section>
    <div class="modal" id="ProductDetailsModels">
        
            <div class="modal-dialog  modal-xl modal-dialog-centered" style="width:85%; margin-top:10px;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Merge Packaging Details</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form method="post" id="form1" class="form-horizontal" data-bv-message="This value is not valid" data-toggle="validator" data-bv-feedbackicons-valid="glyphicon glyphicon-ok" data-bv-feedbackicons-invalid="glyphicon glyphicon-remove" data-bv-feedbackicons-validating="glyphicon glyphicon-refresh">

                            <div class=" row">
                                
                                <div class="col-md-3 col-12 mb-3">
                                    <label>Order No</label>
                                    <input type="text" id="SelectedRowsID" class="form-control" disabled="disabled">
                                </div>

                                <div class="col-md-3 col-12 mb-3">
                                    <label>Qty(nos)</label>
                                    <input type="text" id="BQty" class="form-control" onchange="CalculateWeight(); showremark();" placeholder="Qty" disabled="disabled">
                                </div>
                                <div class="col-md-3 col-12 mb-3">
                                    <label></label>

                                    <label>Order Weight(kg)</label>
                                    <input type="text" id="BWeight" class="form-control" placeholder="Weight" disabled="disabled">
                                </div>

                            </div>

                            <div class="row" id="focushere">

                                <div class="col-md-12">
                                    <br />
                                    <div class="table-responsive">
                                        <table id="example" class="table table-striped table-bordered dt-responsive" style="width:100%;">
                                            <thead style="background-color: #d8e9c1">
                                                <tr class="text-uppercase">
                                                    <th>Box Weight</th>
                                                    <th>No of Boxes</th>
                                                    <th>Total Weight</th>
                                                    <th>Action</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <input type="text" id="BBoxWeight" class="form-control" placeholder="Box Weight" onchange="Mergetotalweightcalculator()">

                                                    </td>
                                                    <td>
                                                        <input type="text" id="BNoOfBox" class="form-control" placeholder="No of Boxes" onchange="Mergetotalweightcalculator()">
                                                    </td>
                                                    <td>
                                                        <input type="text" id="BTotalWeight" class="form-control" placeholder="Total Weight" disabled>
                                                    </td>
                                                    <td>
                                                        <button type="button" class="btn btn-primary" id="btnad" onclick="Bbtnadd()">Add</button>
                                                    </td>
                                                </tr>
                                            </tbody>

                                        </table>


                                        <div class="col-md-12">
                                            <br />
                                            <div class="table-responsive">
                                                <table id="Breal" class="table table-striped table-bordered dt-responsive" style="width:100%;">
                                                    <thead style="background-color: #d8e9c1">
                                                        <tr class="text-uppercase">
                                                            <th hidden>P ID</th>
                                                            <th>Box Weight</th>
                                                            <th>No of Boxes</th>
                                                            <th>Total Weight</th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>

                                                </table>
                                            </div>
                                            @*<button type="button" class="btn btn-success" onclick="Save()"> Save </button>
                                <a href="@Url.Action("Index", "DashbordControl")" class="btn btn-primary"> Back to List </a>*@
                                        </div>
                                        <div class="row m-0">
                                            <div class="col-md-6">

                                            </div>
                                            <div class="col-md-3">
                                                <label id="Blbltot" class="ml-4"></label> 

                                            </div>
                                            <div class="col-md-3">
                                                <button type="button" class="btn btn-success mx-3" onclick="
    ()"> Save </button>
                                                <a href="@Url.Action("Index", "DashbordControl")" class="btn btn-primary"> Back to List </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
</body>


<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.10.0.min.js" type="text/javascript"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.2/jquery-ui.min.js" type="text/javascript"></script>
<link href="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.9.2/themes/blitzer/jquery-ui.css" rel="Stylesheet" type="text/css" />
<script src="~/Scripts/jquery.preloaders.js"></script>



<script>
    $(document).ready(function () {


        $('#FromDate').datepicker({
            dateFormat: 'dd-mm-yy', onSelect: function (selected, evnt) {
            }
        })

        $('#ToDate').datepicker({
            dateFormat: 'dd-mm-yy', onSelect: function (selected, evnt) {
            }
        })

        godata();

        $("#pnlremark").hide();
        $("#hdpreviousqty").val();


    });

    function showremark() {
        debugger;

        if ($("#hdpreviousqty").val() != $('#Qty').val()) {
            $("#pnlremark").show();
            $("#hfSave").hide();


        }
        else {
            $("#pnlremark").hide();
            $("#hfSave").show();
        }

     //   $("#hdpreviousqty").val();


    }


    function popup(ID) {
        $("#myModal").modal("show");
         $.ajax({
            type: "GET",
            url: '@Url.Action("GetPopupData", "DashbordControl")',
             data: { ID: ID },
            dataType: "json",
            success: function (result)
            {
                if (result.Message == "success") {
                    if (result.order.OrderStatus == "dispatched" || result.order.OrderStatus == "Order Dispatched" || result.order.OrderStatus == "Delivered" || result.order.OrderStatus == "Order Cancelled" || result.order.OrderStatus == "Merge & Packing Completed" )
                    {
                        $("#myModal").modal("hide");
                        toastr.warning("Order Already " + result.order.OrderStatus);

                    } else {

                        $("#hfSave").show();
                        $('#OrderNo').val(result.order.ID)
                        $('#Customer').val(result.order.CustName)
                        $('#CustomerCode').val(result.order.CustomerCode)
                        $('#Products').val(result.order.ProductName)
                        $('#Qty').val(result.order.Qty)
                        $("#hdpreviousqty").val(result.order.Qty)
                        $("#Weight").val(result.order.Weight)
                        $("#hdproductid").val(result.order.ProductId)

                        var value = new Date(parseInt(result.order.Date.substr(6)));
                        var month = ("0" + (value.getMonth() + 1)).slice(-2);
                        var day = ("0" + value.getDate()).slice(-2);
                        var ret = day + "-" + month + "-" + value.getFullYear();
                        $("#OrderDate").val(ret);

                        getpreviousrecords();
                    }


                }
                else {
                }
            },
            failure: function (response) {
            },
            error: function (err) {

            }
        });

    }

    function totalweightcalculator() {
        $('#TotalWeight').val((parseFloat($('#NoOfBox').val()) * parseFloat($('#BoxWeight').val())).toFixed(2))

    }
    function Mergetotalweightcalculator() {
        $('#BTotalWeight').val((parseFloat($('#BNoOfBox').val()) * parseFloat($('#BBoxWeight').val())).toFixed(2))

    }


    function getproductdetails() {
        $("#OrderNo").val();

    }

     $("#Update").click(function () {
        var Id = $("#OrderNo").val();
        var Qty = $("#Qty").val();
         var PackagingRemark = $("#PackagingRemark").val();
         var Weight = $("#Weight").val();
         if ($("#hdpreviousqty").val() != $('#Qty').val()) {
             if ($("#PackagingRemark").val() != "") {
                 $("#hfSave").show();
                 var records = {
                     "Id": Id,
                     "Qty": Qty,
                     "PackagingRemark": PackagingRemark,
                     "Weight": Weight,
                     "OldQty": $("#hdpreviousqty").val(),
                     "CustomerName": $('#Customer').val(),
                 };
                 $.ajax({
                     url: "/DashbordControl/updateqty",
                     type: "POST",
                     dataType: "json",
                     data: JSON.stringify(records),
                     contentType: "Application/json",
                     success: function (result) {
                         if (result.Message == "success") {
                             $("#Qty").removeAttr("disabled",true);
                             $('#pnlremark').hide();
                             getpreviousrecords()

                             //swal("success", "Record Updated Success", "success");

                         } else {
                             swal("Error", "Something went wrong while updating record", "error");
                         }
                     },
                     error: function (ex) {
                         console.log("error");
                         console.log(ex);
                     }
                 });

             }
             else { toastr.error("Plese Enter Remark..")  }
         }
    });

    function CalculateWeight() {

        $.preloader.start({
            modal: true,
            src: 'sprites2.png'
        });

        $.ajax({
            type: "GET",
            url: '@Url.Action("CalculateWeight", "DashbordControl")',
            data: { PRODUCT: $('#hdproductid').val(), QTY: $('#Qty').val() },
            dataType: "json",
            success: function (result)
            {
                if (result.Message == "success") {
                    $('#Weight').val(result.weight);
                    $.preloader.stop();
                }
                else {
                    $('#Weight').html('');
                    toastr.error(result.Message);
                    $.preloader.stop();
                }
                $.preloader.stop();
            },
            failure: function (response) {
                $('#Weight').val('');
                $.preloader.stop();
                alert(response.d);
            },
            error: function (err) {
                $('#Weight').html('');
                $.preloader.stop();
                alert(err.statusText);
            }
        });
    }


    function godata() {
        setdates();

        getdatatable();

    }

    function setdates() {

         $.ajax({
            type: "GET",
            url: '@Url.Action("SetDates", "DashbordControl")',
             data: { FROMDATE: $("#FromDate").val(), TODATE: $("#ToDate").val(), TYPE: $("#Type").val(), CITY: $("#City").val(), SHORTNAME: $("#Short_Name").val(), SalesPerson: $('#SalesPerson').val(), Product: $('#Product').val(), ProductType: $('#ProductType').val()},
            dataType: "json",
            success: function (result)
            {
                if (result.Message == "success") {

                }
                else {
                }
            },
            failure: function (response) {
            },
            error: function (err) {

            }
        });

    }

    function getdatatable() {
         try {

               $('#example').DataTable({
                 "destroy": true,
                paging: true,
                "searching": false,
                   dom: 'Bfrtip',
                   "ordering": false,
                "bServerSide": true,
                "sAjaxSource": '@Url.Action("GetData", "DashbordControl")',
                 "sServerMethod": "POST",
                 buttons: [
                     {
                         text: 'Excel',
                         action: function (e, dt, node, config) {
                             window.location.href = '/DashbordControl/Export';
                         }
                     }
                ],



                language: {
                    searchPlaceholder: "Search",
                    search: ""
                },
                 "aoColumns": [

                     {
                         "mData": function (o) {
                             return "<input type='checkbox' id= 'Chk" + o.ID +"' onclick='GetCheckBoxValue(this.id)'>"
                         }
                     },

                     {
                         "mData": function (o) {
                             return "<div class = 'd-flex justify-content-center'><button type='button' id=" + o.ID + "  class='btn btn-primary btn-sm mr-2' onclick='popup(this.id);'><i class='fa fa-plus'></i></button><button type='button' id=" + o.ID + "  class='btn btn-primary btn-sm mr-2' onclick='LabelPrint(" + o.ID+");'><i class='fa fa-print'></i></button></div>"
                         }
                     },

                     {
                         "mData": "ID"
                     },
                     {
                         "mData": "OrderStatus"
                     },
                     {
                         "mData": "CustName"
                     },
                     {
                         "mData": "ShortName"
                     },

                    {
                        "mData": "CustomerTypes"
                    },


                    {
                        "mData": "Qty"
                    },
                     {
                         "mData": "ProductName"
                     },
                    //{
                    //    "mData": "UOM"
                    //},
                    {
                        "mData": "Weight"
                    },




                     {
                         "mData": "City"
                     },
                     {
                         "mData": "Area"
                     },
                     {
                         "mData": "ExpectedDeliveryDate",
                         data: "ExpectedDeliveryDate", render: function (data) {
                             return moment(data).format('DD-MM-YYYY');
                         }
                     },

                     {
                         "mData": "ExpectedDeliveryTime"
                     },
                    {
                        "mData": "Remark"
                     },
                     {
                         "mData": "PackagingRemark"
                     }
                     ,
                     {
                         "mData": "CreatedBy"
                     }                     ,
                     {
                         "mData": "EmpMobile"
                     }


                 ],

                 fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {


                     if (aData.CustomerTypes == "MODERN TRADE") {
                         /*  $('td', nRow).css('background-color', '#ff6666');*/
                      //   alert(aData.ID)
                       //  $('#883').removeClass("btn btn-primary btn-sm mr-2").addClass("btn btn-warning btn-sm mr-2");
                         $("#883").removeClass("btn btn-primary btn-sm mr-2").addClass("btn-info btn-danger");

                     }


                     //////if (aData.OrderStage == "2") {
                     //////    $('td', nRow).css('background-color', '#ff6666');
                     //////}
                     //////else if (aData.OrderStage == "3") {
                     //////    $('td', nRow).css('background-color', '#85a3e0');
                     //////}
                     //////else if (aData.OrderStage == "4") {
                     //////    $('td', nRow).css('background-color', '#28a745');
                     //////}
                     //////else if (aData.OrderStage == "5") {
                     //////    $('td', nRow).css('background-color', '#ed0606');
                     //////}

                     if (aData.OrderStage == "3") {
                         $('td', nRow).css('background-color', '#ff6666');
                     }
                     else if (aData.OrderStage == "2") {
                         $('td', nRow).css('background-color', '#85a3e0');
                     }
                     else if (aData.OrderStage == "8") {
                         $('td', nRow).css('background-color', '#28a745');
                     }
                     else if (aData.OrderStage == "7") {
                         $('td', nRow).css('background-color', '#ed0606');
                     }
                     else if (aData.OrderStage == "6") {
                         $('td', nRow).css('background-color', '#e7e00c');
                     }

                     else {
                        // $('td', nRow).css('background-color', 'blue');
                     }
                 },
                 "footerCallback": function (row, aData, start, end, display) {
                     //Get data here
                     console.log(aData);
                     //Do whatever you want. Example:
                     var totalWeight = 0;
                     var totalQAty = 0;
                     for (var i = 0; i < aData.length; i++) {
                         totalWeight += parseFloat(aData[i].Weight);
                         totalQAty += parseInt(aData[i].Qty);
                     }
                     totalWeight = parseFloat(totalWeight).toFixed(2)
                     var hqty = "Qty(" + totalQAty+")"
                     $('#hfQty').text(hqty);

                     var hfWeight = "Weight(" + totalWeight + "-kg)"
                     $('#hfWeight').text(hfWeight);




                 }
             });

        }
        catch (e) {
        }

    }

    function qtyedit() {
        $("#Qty").removeAttr("disabled");

    }

    function btnadd() {

        var valid = true;

        if ($('#BoxWeight').val() == null || $('#BoxWeight').val() == "") {
            toastr.error("Box Weight is Required.");
            valid = false;
        }
        if ($('#NoOfBox').val() == null || $('#NoOfBox').val() == "") {
            toastr.error("No Of Box  is Required.");
            valid = false;
        }

        if ($('#TotalWeight').val() == null || $('#TotalWeight').val() == "") {
            toastr.error("Total Weight is Required.");
            valid = false;
        }

        if (valid == true) {
            var isexist = false;
            //$("#real tbody tr").each(function (index) {

            //    var $row = $(this);
            //    var $firstColumn = $row.find('td:eq(0)');

            //    if ($firstColumn.text() == $('#product').val()) {
            //        isexist = true;
            //    }
            //});


            if (isexist == true) {
                toastr.error("Already Added.");
            }
            else {

                $("#real").append("<tr> <td>" + $("#BoxWeight").val() + "</td> <td>" + $("#NoOfBox").val() + "</td> <td>" + $("#TotalWeight").val() + "</td><td> <button type='button' id='edt' class='btn btn-sm btn-primary btnEdit' onclick='Edit(this.id);'><i class='fa fa-edit'></i></button> <Button type='Button' class='btn btn-sm btn-danger btnDelete' href='#'  id='dlt' > <i class='fa fa-trash-alt'></i> </Button></td>   </tr>");
                $("#BoxWeight").val('');
                $("#NoOfBox").val('');
                $("#TotalWeight").val('');

                alculatewt();
                //var result = BoxWeight + "    " + NoOfBox + "     " + TotalWeight;
                //$('table#real tr#dynamic').remove();
                //$("#real").append("<tr id='dynamic'> <td>" + BoxWeight + "</td> <td>" + NoOfBox + "</td> <td>" + TotalWeight + "</td>   </tr>");

                               // alert(result)

            }



        }
    }

    function alculatewt() {
        $("#lbltot").text(0);
        var NoOfBox = 0;
        var BoxWeight = 0;
        var TotalWeight = 0;
        $("#real TBODY TR").each(function () {
            var row = $(this);

            NoOfBox = NoOfBox + parseFloat(row.find("TD").eq(1).html());
            BoxWeight = BoxWeight + parseFloat(row.find("TD").eq(0).html());
            TotalWeight = TotalWeight + parseFloat(row.find("TD").eq(2).html());

        });

        $("#lbltot").text(TotalWeight);
    }

    function Save() {
        var temp = true;
        if ($('#real TBODY tr').length == 0) {
            toastr.error("Please add Some records.");
            temp = false;
        }

        if ($("#hdpreviousqty").val() != $('#Qty').val()) {
            if ($("#PackagingRemark").val() == "") {
                toastr.error("Please Update Quantity Changed Remark.");
                temp = false;

            }
        }
        var NoOfBox = 0;
        var BoxWeight = 0;
        var TotalWeight = 0;
        $("#real TBODY TR").each(function () {
            var row = $(this);

            NoOfBox = NoOfBox + parseFloat(row.find("TD").eq(1).html());
            BoxWeight = BoxWeight + parseFloat(row.find("TD").eq(0).html());
            TotalWeight = TotalWeight + parseFloat(row.find("TD").eq(2).html());

        });
        if (parseFloat(TotalWeight) != parseFloat($('#Weight').val())) {
            toastr.error("Order Weight and List Total Weight Must be Same .");
            temp = false;
        }
        if(temp==true) {

            $.preloader.start({
                modal: true,
                src: 'sprites2.png'
            });

            var recs = new Array();

            $("#real TBODY TR").each(function () {
                var row = $(this);
                var Order = {};

                Order.BoxWeight = row.find("TD").eq(0).html();
                Order.NoOfBox = row.find("TD").eq(1).html();
                Order.TotalWeight = row.find("TD").eq(2).html();                
                recs.push(Order);

            });

            var data = {
                recs: recs, OrderNo: $('#OrderNo').val(), PrevQty: $("#hdpreviousqty").val(), OrderQty: $('#Qty').val(), OldQty: $("#hdpreviousqty").val(), PackagingRemark: $("#PackagingRemark").val(), OrderWT : $("#Weight").val()
            }

            //Send the JSON array to Controller using AJAX.
            $.ajax({
                type: "POST",
                url: "/DashbordControl/Save",
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    if (result.Message == "success") {
                        //$('#form0').each(function () {
                        //    this.reset();

                        //});
                       // window.location.href = '/DashbordControl/Index';
                        $("#real tbody").empty();
                        $("#myModal").modal("hide");
                        toastr.success("Records Saved Succesfully");
                        godata();
                    }
                    else {
                        toastr.error(result.Message);
                        $.preloader.stop();
                    }
                    $.preloader.stop();
                }
            });

        }
    }


    function Edit(id) {

        $.preloader.start({
            modal: true,
            src: 'sprites2.png'
        });

        $("#real").on('click', '.btnEdit', function () {
            var row = $(this).closest("tr");
            //var row = $(this).closest('tr')/*.remove()*/;
            $("#BoxWeight").val(row.find("TD").eq(0).html());
            $("#NoOfBox").val(row.find("TD").eq(1).html());
            $("#TotalWeight").val(row.find("TD").eq(2).html());

            $(this).closest('tr').remove();
        });
        $('html, body').animate({
            scrollTop: $("#focushere").offset().top
        }, 2000);

        $.preloader.stop();
        alculatewt();

    }

    $("#real").on('click', '.btnDelete', function () {
        $(this).closest('tr').remove();
    });



    function getpreviousrecords() {
        debugger;
        $.preloader.start({
            modal: true,
            src: 'sprites2.png'
        });

        $.ajax({
            type: "GET",
            url: '@Url.Action("GetPreviousRecords", "DashbordControl")',
            data: { OrderNo: $("#OrderNo").val() },
            dataType: "json",
            success: function (tbldata)
            {
                $("#real tbody").empty();
                $.each(tbldata, function (i, val) {

                    $("#real tbody").append("<tr> <td>" + val.BoxWeight + "</td> <td>" + val.NoOfBox + "</td> <td>" + val.TotalWeight + "</td> <td> <button type='button' id='edt' class='btn btn-sm btn-primary btnEdit' data-toggle='modal' data-target='#EditModal' onclick='Edit(this.id);'><i class='fa fa-edit'></i></button> <Button type='Button' class='btn btn-sm btn-danger btnDelete' href='#'  id='dlt' > <i class='fa fa-trash-alt'></i> </Button></td>   </tr>");

                });
                var NoOfBox = 0;
                var BoxWeight = 0;
                var TotalWeight = 0;
                $("#real TBODY TR").each(function () {
                    var row = $(this);

                    NoOfBox = NoOfBox + parseFloat( row.find("TD").eq(1).html());
                    BoxWeight = BoxWeight+ parseFloat( row.find("TD").eq(0).html());
                    TotalWeight=TotalWeight +parseFloat( row.find("TD").eq(2).html());

                });

                alculatewt();
                //var result = BoxWeight + "    " + NoOfBox + "     " + TotalWeight;
                //$("#real").append("<tr id='dynamic'> <td>" + BoxWeight + "</td> <td>" + NoOfBox + "</td> <td>" + TotalWeight + "</td>   </tr>");

              //  alert(result)


                $.preloader.stop();
            },
            failure: function (response) {
                $("#real tbody").empty();
                $.preloader.stop();
            },
            error: function (err) {
                $("#real tbody").empty();
                $.preloader.stop();
            }
        });

    }

    function GetCheckBoxValue(id) {

        var SelectedRowsID = $('#SelectedRowsID').val();
        var orderid = id.match(/\d+/); // 123456
        orderid = orderid[0];
        var aa = 924;
        var chk = $("#" + id).prop("checked") ? 1 : 0;

        if (chk == 1) {

            SelectedRowsID = SelectedRowsID + "," + orderid;
            $('#SelectedRowsID').val(SelectedRowsID);
        } else {
            var x = "," + orderid;
            SelectedRowsID = SelectedRowsID.replace(x, '');
            $('#SelectedRowsID').val(SelectedRowsID);
        }

    }

    function ShowBulkPopup() {

        if ($('#SelectedRowsID').val() == "") {
            toastr.error("Please Select Record...");
        } else {

            GetBulkData();
        }

    }

    function GetBulkData() {
        debugger
        var originalString = $('#SelectedRowsID').val();
        var myString = originalString.substring(1);
        var data = myString.split(',');
        var lst = [];

        for (let i = 0; i < data.length; i++) {

            var OBJ = {
                Id: data[i]
            }
            lst.push(OBJ);
        }
        var cntt = lst.length;
        if (cntt == 0 || cntt ==1) {
            $("#ProductDetailsModels").modal("hide");
            toastr.error("Please Select More Than One Order No");
        } else {

        var data = {

            OrderData: lst,
        }
        //Send the JSON array to Controller using AJAX.
        $.ajax({
            type: "POST",
            url: "/DashbordControl/GetBulkData",
            data: JSON.stringify(data),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                $.preloader.stop();
                if (result.Message == "success") {
                    $('#ProductDetailsModels').modal({ backdrop: 'static', keyboard: false })
                    $("#ProductDetailsModels").modal("show");
                    $('#BQty').val(result.TotalQty);
                    $('#BWeight').val(result.TotalWT);
                }
                else {
                    alert(result.Message);
                    $.preloader.stop();
                }
                $.preloader.stop();
            }
        });
    }
    }
    function Bbtnadd() {

        var valid = true;

        if ($('#BBoxWeight').val() == null || $('#BBoxWeight').val() == "") {
            toastr.error("Box Weight is Required.");
            valid = false;
        }
        if ($('#BNoOfBox').val() == null || $('#BNoOfBox').val() == "") {
            toastr.error("No Of Box  is Required.");
            valid = false;
        }

        if ($('#BTotalWeight').val() == null || $('#BTotalWeight').val() == "") {
            toastr.error("Total Weight is Required.");
            valid = false;
        }

        if (valid == true) {
            var isexist = false;
            //$("#real tbody tr").each(function (index) {

            //    var $row = $(this);
            //    var $firstColumn = $row.find('td:eq(0)');

            //    if ($firstColumn.text() == $('#product').val()) {
            //        isexist = true;
            //    }
            //});


            if (isexist == true) {
                toastr.error("Already Added.");
            }
            else {

                $("#Breal").append("<tr> <td>" + $("#BBoxWeight").val() + "</td> <td>" + $("#BNoOfBox").val() + "</td> <td>" + $("#BTotalWeight").val() + "</td><td> <button type='button' id='Bedt' class='btn btn-sm btn-primary btnEdit' onclick='BEdit(this.id);'><i class='fa fa-edit'></i></button> <Button type='Button' class='btn btn-sm btn-danger btnDelete' href='#'  id='dlt' > <i class='fa fa-trash-alt'></i> </Button></td>   </tr>");
                $("#BBoxWeight").val('');
                $("#BNoOfBox").val('');
                $("#BTotalWeight").val('');

                var NoOfBox = 0;
                var BoxWeight = 0;
                var TotalWeight = 0;
                $("#Breal TBODY TR").each(function () {
                    var row = $(this);

                    NoOfBox = NoOfBox + parseFloat(row.find("TD").eq(1).html());
                    BoxWeight = BoxWeight + parseFloat(row.find("TD").eq(0).html());
                    TotalWeight = TotalWeight + parseFloat(row.find("TD").eq(2).html());

                });

                $("#Blbltot").text(TotalWeight);




                //var result = BoxWeight + "    " + NoOfBox + "     " + TotalWeight;
                //$('table#real tr#dynamic').remove();
                //$("#real").append("<tr id='dynamic'> <td>" + BoxWeight + "</td> <td>" + NoOfBox + "</td> <td>" + TotalWeight + "</td>   </tr>");

                // alert(result)

            }



        }
    }
    function BEdit(id) {

        $.preloader.start({
            modal: true,
            src: 'sprites2.png'
        });

        $("#Breal").on('click', '.btnEdit', function () {
            var row = $(this).closest("tr");
            //var row = $(this).closest('tr')/*.remove()*/;
            $("#BBoxWeight").val(row.find("TD").eq(0).html());
            $("#BNoOfBox").val(row.find("TD").eq(1).html());
            $("#BTotalWeight").val(row.find("TD").eq(2).html());

            $(this).closest('tr').remove();
        });
        $('html, body').animate({
            scrollTop: $("#focushere").offset().top
        }, 2000);

        $.preloader.stop();
        alculatewt();

    }

    function BSave() {
        var temp = true;
        if ($('#Breal TBODY tr').length == 0) {
            toastr.error("Please add Some records.");
            temp = false;
        }


        var NoOfBox = 0;
        var BoxWeight = 0;
        var TotalWeight = 0;
        $("#Breal TBODY TR").each(function () {
            var row = $(this);

            NoOfBox = NoOfBox + parseFloat(row.find("TD").eq(1).html());
            BoxWeight = BoxWeight + parseFloat(row.find("TD").eq(0).html());
            TotalWeight = TotalWeight + parseFloat(row.find("TD").eq(2).html());

        });
        if (parseFloat(TotalWeight) != parseFloat($('#BWeight').val())) {
            toastr.error("Order Weight and List Total Weight Must be Same .");
            temp = false;
        }
        debugger
        if (temp == true) {

            $.preloader.start({
                modal: true,
                src: 'sprites2.png'
            });

            var recs = new Array();

            $("#Breal TBODY TR").each(function () {
                var row = $(this);
                var Order = {};

                Order.BoxWeight = row.find("TD").eq(0).html();
                Order.NoOfBox = row.find("TD").eq(1).html();
                Order.TotalWeight = row.find("TD").eq(2).html();
                //Order.OldQty = $("#hdpreviousqty").val();
                //Order.PackagingRemark $("#PackagingRemark").val();
                recs.push(Order);

            });
            var originalString = $('#SelectedRowsID').val();
            var myString = originalString.substring(1);
            var data = myString.split(',');
            var lst = [];

            for (let i = 0; i < data.length; i++) {

                var OBJ = {
                    Id: data[i]
                }
                lst.push(OBJ);
            }

            var data = {
                recs: recs, OrderNo: lst, OrderQty: $('#BQty').val(), OrderWT: $("#BWeight").val(), MergeOrderNo: myString
            }

            //Send the JSON array to Controller using AJAX.
            $.ajax({
                type: "POST",
                url: "/DashbordControl/BSave",
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    if (result.Message == "success") {
                        $.preloader.stop();
                        //$('#form0').each(function () {
                        //    this.reset();

                        //});
                         window.location.href = '/DashbordControl/Index';
                        $("#real tbody").empty();
                        $("#ProductDetailsModels").modal("hide");
                        toastr.success("Records Saved Succesfully");
                        godata();
                    }
                    else {
                        toastr.error(result.Message);
                        $.preloader.stop();
                    }
                    $.preloader.stop();
                }
            });

        }
    }
     function LabelPrint(ID) {
        $.ajax({
            url: '@Url.Action("StickerPrint", "DashbordControl")',
            type: "GET",
            dataType: "JSON",
            async: false,
            data: { OrderNo: ID },
            success: function (result) {
                try {

                    if (result.Message == "success") {
                        debugger;
                        window.open('/DashbordControl/GetReportLabel', '_blank');
                        //window.open('http://www.bing.com/', '_blank');
                        //window.location = '/ShipmentDetails/GetReport';
                    }
                    else {
                        toastr.error(result.Message);
                    }
                }
                catch (e) {

                }
            }
        });
    }

    function GetProducts() {
        $.ajax({
            type:'GET',
            url: '/DashbordControl/GetProducts',
            data: { PrdType: $('#ProductType').val() },
            dataType: "json",
            success: function (result) {
                $("#Product").empty();
                $("#Product").append("<option value=''>Select</option>");
                $.each(result.prd, function (i, val) {
                    $("#Product").append("<option value='" + val.Name + "'>" + val.Name + "</option>");
                });
            }
        })
    }
</script>

